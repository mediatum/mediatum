<!--
  Copyright (C) since 2007, Technical University of Munich (TUM) and mediaTUM authors
  SPDX-License-Identifier: AGPL-3.0-or-later
-->
<tal:block metal:define-macro="editorfield" tal:define="schema python:metafield.getSchemaNode().getName()">
    <input
        type="text"
        tal:attributes="name python:u'mediatum-editor-nodefield-value-{}-text'.format(name);
            value python:value;
            required required"
       />
    <button
        tal:attributes="
            onclick python:u'openPopup(\'/metatype/ilist?type={}&name={}&schema={}\', \'\', 400, 400)'.format(
                metafield.getFieldtype(),
                metafield.name,
                schema,
                );
            "
        class="mediatum-editor-nodefield-value-indexbutton"
        style="width: 44px; padding: 0px;"
        type="button"
        i18n:attributes="title editor_index_title"
        i18n:translate="editor_index"
    >
    </button>
</tal:block>

<select metal:define-macro="searchfield" tal:attributes="name python:name; id python:name" class="searchfield" tal:content="raw option_list"/>

<metal:block metal:define-macro="popup">
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
        <head>
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
            <meta content="text/html;charset=UTF-8" http-equiv="content-type"/>
            <title i18n:translate="popup_index_header">TEXT</title>
            <script src="/static/js/metadata/ilist.js"> </script>
            <script tal:repeat="src html_head_javascript_src" tal:attributes="src src"> </script>
            <link href="/static/css/popup.css" rel="stylesheet" type="text/css"/>
            <link rel="stylesheet" tal:repeat="src html_head_style_src" tal:attributes="href src" />
        </head>
        <body class="form" tal:attributes="onload python:u'getValue(\'{}\')'.format(metafield_name_for_html)">
            <form>
                <table class="maintable">
                    <tr class="headline">
                        <th>
                            <span i18n:translate="popup_index_header">TEXT</span>: 
                            <div style="position:absolute; right:8px;top:8px">
                              <a tal:attributes="href python:u'/metatype/ilist?print=do&name={}&schema={}'.format(fieldname,schema)">
                                  <img src="/static/img/printer.png" border="0px"/>
                              </a>
                            </div>
                        </th>
                    </tr>
                    <tr>
                        <td class="content">
                            <select multiple id="values" class="sel" onchange="setNumber()" tal:content="raw option_list"/>
                            <div style="text-align:right;float:right">
                                <small style="font-size:9px"><span id="count">2</span> <span i18n:translate="popup_indexnumber">TEXT</span></small>
                            </div>
                            <div style="font-size:9px">
                                <a
                                    i18n:attributes="title popup_listvalue_title"
                                    i18n:translate="popup_listvalue"
                                    href="#!"
                                    onclick="showValues()"
                                    class="mediatum-link-mediatum"
                                >
                                </a>
                                <a
                                    i18n:attributes="title popup_clearselection_title"
                                    i18n:translate="popup_clearselection"
                                    href="#!"
                                    onclick="clearSelection()"
                                    class="mediatum-link-mediatum"
                                >
                                </a>
                            </div>
                        </td>
                    </tr>
                    <tr class="bottom">
                        <td>
                            <button
                                class="mediatum_button_width"
                                tal:attributes="onclick python:u'pick(\'{}\')'.format(metafield_name_for_html)"
                                i18n:translate="ok"
                                type="button"
                            >
                            </button>
                            <button
                                i18n:translate="cancel"
                                type="button"
                                onclick="window.close()"
                                style="width: 100px"
                            >
                            </button>
                        </td>
                    </tr> 
                </table>
            </form>
        </body>
    </html>
</metal:block>
