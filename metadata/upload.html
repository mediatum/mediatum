<!--
  Copyright (C) since 2007, Technical University of Munich (TUM) and mediaTUM authors
  SPDX-License-Identifier: AGPL-3.0-or-later
-->
<div metal:define-macro="m_upload_filelist" id="m_upload_table">
    <table id="filetable_edit">
        <tr tal:condition="python:len(files)!=0">
            <th i18n:translate="upload_filelist_type">TEXT</th>
            <th i18n:translate="upload_filelist_size">TEXT</th>
            <th i18n:translate="upload_filelist_mimetype">TEXT</th>
            <th i18n:translate="upload_filelist_loc">TEXT</th>
            <th tal:condition="delbutton">&nbsp;</th>
        </tr>
        <tr tal:repeat="file files">
            <td tal:content="python:file.type"/>
            <td tal:content="python:u'{} bytes'.format(file.getSize())"/>
            <td tal:content="python:file.mimetype"/>
            <td>
                <a i18n:attributes="title upload_filelist_open_title" target="filewindow"
                 tal:attributes="href python:u'/file/{}/{}'.format(node.id, file.getName())"
                 tal:content="python:file.getName()"/>
            </td>
            <td tal:condition="delbutton">
                <input
                        i18n:attributes="title upload_filelist_delete_title"
                        src="/img/delete.png"
                        tal:attributes="name python:u'delete_{}'.format(file.getName());onclick python:u'return m_upload_delete_file_json_for_targetnode(&quot;{}&quot;,this.name)'.format(fieldname)"
                        type="image"
                       />
            </td>
        </tr>
    </table>
</div>

<div metal:define-macro="m_upload_filelist_nodebig" id="m_upload_table">
    <table id="filetable_nodebig">
        <tr tal:condition="python:len(files)!=0">
            <th i18n:translate="upload_filelist_loc">TEXT</th>
            <th i18n:translate="upload_filelist_size">TEXT</th>
            <th tal:condition="delbutton">&nbsp;</th>
        </tr>
        <tr tal:repeat="file files">
            <td>
                <a i18n:attributes="title upload_filelist_open_title" target="filewindow"
                 tal:attributes="href python:u'/file/{}/{}'.format(node.id, file.getName())"
                 tal:content="python:file.getName()"/>
            </td>
            <td tal:content="python:u'{} bytes'.format(file.getSize())"/>
            <td tal:condition="delbutton">
                <input
                        i18n:attributes="title upload_filelist_delete_title"
                        src="/img/delete.png"
                        tal:attributes="name python:u'delete_{}'.format(file.getName());onclick python:u'return m_upload_delete_file_json_for_targetnode(&quot;{}&quot;, this.name)'.format(fieldname)"
                        type="image"
                       />
            </td>
        </tr>
    </table>
</div>

<tal:block metal:define-macro="editorfield">

    <!-- source: http://jquery.malsup.com/form/ -->
    <script src="/js/jquery-1.12.4.js"> </script>
    <script src="/js/jquery-migrate-1.4.1.js"> </script>
    <script src="/js/jquery.form.js"> </script>
    <script src="/js/metadata/upload.js"> </script>

    <div class="mediatum_blue_border" tal:attributes="id python:u'upload_div_FOR_{}'.format(fieldname); name python:'upload_div_FOR_{}'.format(fieldname); style python:u'width:{}px'.format(width)">
        <input type="hidden" tal:attributes="id python:u'submitter_class_{}'.format(name)" name="submitter_class" value="" />
        <input type="hidden" tal:attributes="id python:u'submitter02_FOR_{}'.format(fieldname); name python:u'submitter_FOR_{}'.format(fieldname); value python:name" />
        <input type="hidden" tal:attributes="id python:u'submitter_FOR_{}'.format(fieldname); value python:name" name="submitter" />
        <input type="hidden" tal:attributes="id python:u'targetnodeid_{}'.format(name); name python:u'targetnodeid_FOR_{}'.format(fieldname)" value="" />
        <div class="mediatum_color_red" tal:attributes="name python:u'upload_warn_div_FOR_{}'.format(fieldname)" tal:content="python:warning"> TEXT </div>
        <!-- zero width spaces (#8203) needed for IE(8) and metadata mask editor -->
        &#8203;<input type="file" size="60%" disabled="disabled" tal:attributes="id name; value value; required required; name python:u'm_upload_file_FOR_{}'.format(fieldname)" />
        &#8203;<br/>
        &#8203;<input tal:attributes="id python:u'upload_submit_FOR_{}'.format(fieldname); name python: u'upload_submit_FOR_{}'.format(fieldname); onclick python: u'm_upload_submit(&quot;{}&quot;)'.format(fieldname)" type="submit" value="Submit (disabled)" disabled="disabled" />
          <div tal:attributes="id python:u'response_FOR_{}'.format(fieldname)"> </div>
          <div tal:attributes="id python:u'file_list_FOR_{}'.format(fieldname)"> </div>
    </div>

    <script tal:content="python:u'm_upload_register_fieldname(&quot;{}&quot;)'.format(fieldname)" />
</tal:block>
