<!--
  Copyright (C) since 2007, Technical University of Munich (TUM) and mediaTUM authors
  SPDX-License-Identifier: AGPL-3.0-or-later
-->
<div metal:define-macro="metaeditor" class="back">  
    <h3 tal:condition="python:op=='new'" i18n:translate="mask_edit_new_vert_field">TEXT</h3>
    <h3 tal:condition="python:op=='edit'" i18n:translate="mask_edit_edit_vert_field">TEXT</h3>
    <br/>
    <label>
      <tal:block i18n:translate="">mask_edit_row_label</tal:block>
      <input
        tal:attributes="value python:item.getLabel()"
        type="text"
        name="label"
        id="label"
        style="width:500px"
       />
    </label>
    <br/>
    
    <tal:block tal:condition="python:op=='new'">
      <label>
        <tal:block i18n:translate="">mask_edit_position</tal:block>
        <select name="insertposition" style="width:500px">
            <option value="end" selected="selected" i18n:translate="mask_edit_end">TEXT</option>
            <tal:block tal:repeat="field fields">
                <option tal:condition="python:hasattr(field.getField(),'getFieldtype')" tal:attributes="value python:field.id" tal:content="python:u'{} ({})'.format(field.getLabel(), field.getField().getFieldtype())"/>

                <option tal:condition="python:not hasattr(field.getField(),'getFieldtype')" tal:attributes="value python:field.id" tal:content="python:u'{} ({})'.format(field.getLabel(), field.get('type'))"/>
            </tal:block>
        </select>
      </label>
        <br/>
        <hr/>
        <h4 tal:condition="python:len(details)>0"><span i18n:translate="mask_edit_fields">TEXT</span> <small i18n:translate="mask_edit_field_msg">TEXT</small></h4>
    </tal:block>
    
    <tal:block tal:condition="python:op=='edit'">
        <hr>
        <h4 i18n:translate="mask_edit_fields">TEXT</h4>
        <div align="right">
            <input
                tal:attributes="name python:u'newdetail_{}'.format(item.id)"
                type="image"
                src="/static/img/install.png"
                onclick="document.getElementById('mediatum-edit-form-metadata').type.value=''"
                i18n:attributes="title mask_edit_insert_field_title"
               />
        </div>
    </tal:block>
    <tal:block tal:replace="raw details"/>
    <input tal:attributes="value python:item.id" type="hidden" name="id"/>
    <input tal:attributes="value op" type="hidden" name="op"/>
    <input tal:attributes="value selid" type="hidden" name="sel_id"/>
    <input type="hidden" name="type" value="vgroup"/>
    <input tal:attributes="value pid" type="hidden" name="pid"/>
    <br/>&nbsp;
    <br/>
    <div class="label">&nbsp;</div>
    <button
        type="submit"
        name="savedetail"
        i18n:translate="save"
       >
    </button>
    &nbsp;&nbsp;
    <button
        type="submit"
        onclick="setCancel(document.getElementById('mediatum-edit-form-metadata').op)"
        i18n:translate="cancel"
       >
    </button>
</div>

<tal:block metal:define-macro="get_form_html">
  <fieldset class="mediatum-editor-vgroupfield">
    <legend tal:content="label"/>
    <tal:block tal:content="structure children_html"/>
  </fieldset>
</tal:block>

<!-- admin area: row for mask editing -->
<tal:block metal:define-macro="admin_get_field_for_maskedit">
    <fieldset tal:condition="python:is_sub" style="cursor:hand">
        <legend tal:condition="python:label" tal:content="python:label"/>
        <tal:block tal:condition="python:html_form" tal:replace="structure html_form"/>
        <span tal:condition="python:not html_form" i18n:translate="">
            mask_editor_no_fields
        </span>
    </fieldset>
    <fieldset
        tal:condition="python:not is_sub"
        tal:attributes="id python:item_id"
        class="mediatum-admin-maskedit-maskitem"
    >
        <legend tal:condition="python:label" tal:content="python:label"/>
        <tal:block tal:condition="python:html_form" tal:replace="structure html_form"/>
        <span tal:condition="python:not html_form" i18n:translate="">
            mask_editor_no_fields
        </span>
        <div
            tal:condition="python:not is_sub"
            tal:attributes="python:id python:'{}_sub'.format(item_id)"
            align="right"
            class="mediatum-admin-maskedit-itemeditgroup"
        >
            <small tal:content="python:item_type" class="mediatum-admin-maskitem-group-type"/>
            <input
                tal:condition="python:not is_first"
                tal:attributes="name python:'up_{}'.format(item_id)"
                i18n:attributes="title mask_edit_up_title"
                type="image"
                src="/static/img/uparrow.png"
            />
            <input
                tal:condition="python:not is_last"
                tal:attributes="name python:'down_{}'.format(item_id)"
                i18n:attributes="title mask_edit_down_title"
                type="image"
                src="/static/img/downarrow.png"
            />
            <input
                tal:attributes="name python:'edit_{}'.format(item_id)"
                i18n:attributes="title mask_edit_edit_row"
                type="image"
                src="/static/img/edit.png"
            />
            <input
                tal:attributes="name python:'delete_{}'.format(item_id)"
                i18n:attributes="title mask_edit_delete_row"
                type="image"
                src="/static/img/delete.png"
                onClick="return questionDel()"
            />
        </div>
    </fieldset>
</tal:block>
