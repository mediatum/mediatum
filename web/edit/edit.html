<!--
  Copyright (C) since 2007, Technical University of Munich (TUM) and mediaTUM authors
  SPDX-License-Identifier: AGPL-3.0-or-later
-->
<metal:block metal:define-macro="include_jquery_script_tags">
  <script src="/static/js/jquery-2.0.3.js"> </script>
  <script src="/static/jquery-ui-1.12.1/jquery-ui.js"> </script>
</metal:block>

<metal:block metal:define-macro="include_jquery_layout_script_tags">
    <script src="/static/js/jquery.layout.min.js"> </script>
    <script src="/static/js/jquery.layout.resizePaneAccordions-latest.min.js"> </script>
</metal:block>

<metal:block metal:define-macro="include_fancytree_script_tags">
  <script src="/static/fancytree/src/jquery.fancytree.js"> </script>
  <script src="/static/fancytree/src/jquery.fancytree.persist.js"> </script>
  <script src="/static/fancytree/src/jquery.fancytree.filter.js"> </script>
  <script src="/static/fancytree/src/jquery.fancytree.dnd.js"> </script>
  <script src="/static/fancytree/src/jquery.fancytree.edit.js"> </script>
  <script src="/static/fancytree/3rd-party/extensions/contextmenu/js/jquery.contextMenu-1.6.5.js"> </script>
</metal:block>

<metal:block metal:define-macro="include_javascript_script_tags">
  <tal:block metal:use-macro="include_jquery_script_tags"/>
  <tal:block metal:use-macro="include_jquery_layout_script_tags"/>
  <tal:block metal:use-macro="include_fancytree_script_tags"/>
  <script src="/static/js/editor.js"> </script>
  <script src="/static/js/admin.js"> </script>
  <script src="/static/js/edit/edit_main.js"> </script>
</metal:block>

<metal:block metal:define-macro="include_javascript_script_tags_frame">
  <tal:block metal:use-macro="include_jquery_script_tags"/>
  <tal:block metal:use-macro="include_jquery_layout_script_tags"/>
  <script src="/static/js/editor.js"> </script>
  <script src="/static/js/admin.js"> </script>
  <script src="/static/js/mediatum.js"> </script>
</metal:block>

<div class="mediatum_clean-container" metal:define-macro="edit_tabs" >
    <ul class="mediatum_nav">
        <tal:block tal:repeat="navitem python:menu">
            <!-- Main Menu -->
            <li tal:condition="python:len(navitem.getItemList())==0" tal:attributes="class python:{0:None,1:'selected'}[navitem.name==breadcrumbs[0]]">
                <a
                    href="#!"
                    i18n:translate=""
                    tal:content="python:u'tab_{}'.format(navitem.getName())"
                    tal:attributes="
                        id python:u'{}'.format(navitem.getName());
                        onclick python:u'''reloadURL('?srcnodeid={0}&id={1}&tab={2}', '{2}', 'mediatum-editor-nav-image-wait')'''.format(
                            srcnodeid,
                            idstr,
                            navitem.getName(),
                           );
                        class python:u'mediatum_img_nav mediatum_img_{} mediatum-link-mediatum mediatum-icon-small'.format(navitem.getName());
                       "
                />
            </li>
            <li tal:condition="python:len(navitem.getItemList())>0" tal:attributes="class python:{0:None,1:'selected'}[navitem.name==breadcrumbs[0]]">
                <a
                    tal:attributes="
                    class python:u'mediatum_img_nav mediatum_img_{} mediatum-link-mediatum mediatum-icon-small'.format(navitem.getName());
                    target python:navitem.target;
                    " i18n:translate=""
                    tal:content="python:u'tab_{}'.format(navitem.getName())"
                />
                <ul>
                    <!-- Second Menu -->
                    <li tal:repeat="item python:navitem.getItemList()">
                        <a
                            href="#!"
                            i18n:translate=""
                            tal:content="python:u'tab_{}'.format(item.getName())"
                            tal:attributes="
                                id python:u'{}'.format(item.getName());
                                onclick python:u'''reloadURL('?srcnodeid={0}&id={1}&tab={2}', '{2}', 'mediatum-editor-nav-image-wait')'''.format(
                                    srcnodeid,
                                    idstr,
                                    item.getName(),
                                   ) if not item.getItemList() else None;
                                class python:u'mediatum_img_nav mediatum_img_{} mediatum-link-mediatum mediatum-icon-small'.format(item.getName());
                               "
                        />
                        <!-- Third Menu -->
                        <ul tal:condition="python:item.getItemList()">
                            <li tal:repeat="item1 python:item.getItemList()">
                                <div>
                                    <a
                                        href="#!"
                                        i18n:translate=""
                                        tal:content="python:u'tab_{}'.format(item1.getName())"
                                        tal:attributes="
                                            id python:u'{}'.format(item1.getName());
                                            onclick python:u'''reloadURL('?srcnodeid={0}&id={1}&tab={2}', '{2}', 'mediatum-editor-nav-image-wait')'''.format(
                                                srcnodeid,
                                                idstr,
                                                item1.getName(),
                                               );
                                            class python:u'mediatum_img_nav mediatum_img_{} mediatum-link-mediatum mediatum-icon-small'.format(item1.getName());
                                           "
                                    />
                                </div>
                            </li>
                        </ul>
                    </li>
                </ul>
            </li>
        </tal:block>
    </ul>
    <div class="mediatum_breadcrumbs">
        <div class="mediatum_breadcrumbs_h">
            <h2>
                <tal:block tal:repeat="item breadcrumbs">
                    <tal:block tal:content="python:u'tab_{}'.format(item.replace('*',''))" i18n:translate="">TEXT</tal:block>
                    <tal:block tal:condition="python:breadcrumbs.index(item)<len(breadcrumbs)-1"> &raquo; </tal:block>
                </tal:block>
            </h2>
        </div>
        <div id="nodeid_" class="mediatum_breadcrumbs_id">
        ID:
             <a
                 target="_blank"
                 tal:condition="python:len(ids)==1"
                 tal:attributes="href python: node_url(ids[0])"
                 tal:content='python:ids[0]'
                 class="mediatum-link-internal"
             >
             </a>
             <span tal:condition="python:1 < len(ids) <= 5" tal:replace="python:u', '.join(ids)"/>
             <span tal:condition="python:len(ids) > 5" tal:replace="python:u'{}...'.format(u', '.join(ids[:5]))"/>
        </div>
     </div>
</div>

<metal:block metal:define-macro="edit_errorpage">
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <link rel="stylesheet" tal:repeat="src html_head_style_src" tal:attributes="href src" />
        <script tal:repeat="src html_head_javascript_src" tal:attributes="src src"> </script>
    </head>
    <body>
        <h1 tal:content="errormsg"/>
    </body>
</html>
</metal:block>

<p metal:define-macro="edit_errortemplate" class="mediatum_templateerror">
    <tal:block i18n:translate="edit_template_error"/><br/><br/>
    <span id="msg" tal:condition="python:e!=''" tal:content="e"/>
</p>

<p metal:define-macro="module_error" class="error" i18n:translate="edit_module_error"><tal:block tal:content="python:module" i18n:name="name"/></p>

<body metal:define-macro="edit_notree_permission" id="mediatum_edit_notree_permission">
    &nbsp;  no tree permission
</body>

<metal:block metal:define-macro="edit_main">
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
        <head>
            <META http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
            <meta content="text/html;charset=UTF-8" http-equiv="content-type"/>
            <title i18n:translate="mediatum_main_title"> </title>

            <link id="id_link_fancytree_skin" rel="stylesheet" href="/static/fancytree/src/skin-xp/ui.fancytree.css" />
            <link rel="stylesheet" href="/static/fancytree/3rd-party/extensions/contextmenu/css/jquery.contextMenu.css" />
            <link rel="stylesheet" href="/static/css/editor.css" />

            <script tal:content="python:u'var user_folders = {};'.format({k: str(folders[k][0].id) for k in folders})">TEXT</script>
            <script tal:content="python:u'var collectionsid = \'{}\';'.format(collectionsid)">TEXT</script>
            <script tal:content="python:u'var containertype2iconpath = {};'.format([[str(i) for i in j] for j in cmenu_iconpaths])">;</script>
            <script tal:content="python:u'var edit_t = \'{}\';'.format(translate(language, 'edit_edit_container_node'))">;</script>
            <script tal:content="python:u'var cut_t = \'{}\';'.format(translate(language, 'edit_cut_container'))">;</script>
            <script tal:content="python:u'var paste_t = \'{}\';'.format(translate(language, 'edit_paste_container_here'))">;</script>
            <script tal:content="python:u'var addcontainer_t = \'{}\';'.format(translate(language, 'edit_add_new_container'))">;</script>
            <script tal:content="python:u'var emptybin_t = \'{}\';'.format(translate(language, 'edit_empty_recycle_bin'))">;</script>
            <script tal:content="python:u'var delete_t = \'{}\';'.format(translate(language, 'edit_delete_container'))">;</script>
            <script tal:content="python:u'var add_col_t = \'{}\';'.format(translate(language, 'edit_add_new_collection'))">;</script>
            <tal:block metal:use-macro="include_javascript_script_tags"/>
            <script tal:repeat="src html_head_javascript_src" tal:attributes="src src"> </script>
        </head>
        <body id="body1">
            <iframe class="ui-layout-center" tal:attributes="src python:u'/edit/edit_content?srcnodeid={}&id={}&page={}&nodes_per_page={}&sortfield={}&value={}{}'.format(id, id, page, nodes_per_page,sortfield, value, searchitems)"> </iframe>
            <div class="ui-layout-north">
                <div class="mediatum_logocontainer">
                    <span i18n:translate="sub_header_user">TEXT</span>: <span tal:replace="raw python:user.getName()"/>
                    <span tal:repeat="item python:spc">
                        | <a
                            tal:attributes="
                                href python:item.link;
                                target python:item.target;
                                title python:u'{}_title'.format(item.getName());
                                class python: item.cssclass;
                            "
                            i18n:translate=""
                            i18n:attributes="title"
                            tal:content="python:item.getName()"
                    >
                    </a>
                    </span>
                </div>
            </div>
            <h3 class="mediatum_id_h3_editor" >mediaTUM<sup>&reg;</sup> Editor </h3>
            <div class="ui-layout-west">
                <div class="mediatum_subnavigation">
                    <div tal:content="python:''" class="mediatum_subnavigation_1"></div>
                    <div class="mediatum_subnavigation_2" i18n:translate="">
                        <a href="#" tal:attributes="onclick python:u'return reloadPage({},\'{}\')'.format(folders['homedir'][0].id, folders['homedir'][1])">
                            <img
                                class="mediatum_subnavigation_2_img mediatum-icon-small"
                                src="/static/img/webtree/home.svg"
                                i18n:attributes="title user_home"
                            />
                        </a>
                        <a href="#" tal:attributes="onclick python:u'return reloadPage({},\'{}\')'.format(folders['trashdir'][0].id, folders['trashdir'][1])">
                            <img
                                class="mediatum_subnavigation_2_img mediatum-icon-small"
                                src="/static/img/webtree/trashbin.svg"
                                i18n:attributes="title user_trash"
                            />
                        </a>
                        <a href="#" tal:attributes="onclick python:u'return reloadPage({},\'{}\')'.format(folders['uploaddir'][0].id, folders['uploaddir'][1])">
                            <img
                                class="mediatum_subnavigation_2_img mediatum-icon-small"
                                src="/static/img/webtree/download.svg"
                                i18n:attributes="title e_folder_uploaddir"
                            />
                        </a>
                        &nbsp;&nbsp;&nbsp;
                    </div>
                </div>
                <div class="mediatum_treecontent" id="tree">
                    <div i18n:translate="select_target_dir" id="select_target_dir">TEXT</div>
                    <div class="mediatum_accordiontree">
                        <h3 class="mediatum_context-menu-home">
                            <a
                                href="#!"
                                tal:attributes="onclick python:u'loadEditArea({})'.format(basedirs[0].id)"
                                class="mediatum-link-internal"
                            >
                                <span id="homedir" tal:content="python:basedirs[0].getName()" i18n:translate=""/>
                            </a>
                        </h3>
                        <div class="mediatum_home_content" onmouseover="$(this).scrollTop(-100);">
                            <tal:block tal:condition="python:user.isAdmin()">
                              <label>Filter:</label>
                              <input id="homenodefilter" name="homenodefilter" i18n:attributes="title edit_tree_homenodefilter_tooltip" tal:attributes="value python:homenodefilter" />
                              <button id="id_btn_reload_htree" onclick="reload_htree_filtered(); return false;" i18n:attributes="title edit_tree_filterbutton_tooltip">&times;</button>
                              <span i18n:attributes="title edit_tree_matches_tooltip" id="htree_matches"> </span>
                            </tal:block>
                            <div  class="mediatum_acc_content" id="hometree"> </div>
                        </div>
                        <h3 class="context-menu-collections">
                            <a
                                href="#!"
                                tal:attributes="onclick python:u'loadEditArea({})'.format(basedirs[1].id)"
                                class="mediatum-link-internal"
                            >
                                <span id="collections" tal:content="python:basedirs[1].getLabel()"/>
                            </a>
                        </h3>
                        <div class="mediatum_acc_content" id="tree_content">
                            <div id="mediatum_collectionstree"> </div>
                        </div>
                    </div>
                </div>
                <div class="mediatum_treesouth">
                    <div class="mediatum_buttonmessage"> </div>
                </div>
            </div>

            <script tal:content="python:u'var currentid = {};'.format(id)">TEXT</script>
            <script tal:content="python:u'var currentpath = \'/{}\';'.format('/'.join(path[2:]))">TEXT</script>
            <script tal:content="python:u'var currentcpath = \'/{}\';'.format('/'.join(containerpath[1:]))">TEXT</script>
            <script tal:content="python:u'var js_edit_layout_togglertip_open = \'{}\';'.format(translate(language, 'edit_layout_togglertip_open'))">;</script>
            <script tal:content="python:u'var js_edit_layout_togglertip_closed = \'{}\';'.format(translate(language, 'edit_layout_togglertip_closed'))">;</script>
            <script tal:content="python:u'var js_edit_layout_resizertip = \'{}\';'.format(translate(language, 'edit_layout_resizertip'))">;</script>
            <script tal:content="python:u'var csrf = \'{}\';'.format(csrf)"> </script>
            <!-- Definition of context menu -->
            <tal:block tal:repeat="ct_iconpath cmenu_iconpaths">
                <style tal:content="python: '.context-menu-item.icon-%s { background-image: url(/static/img/%s); }' % (ct_iconpath[0], ct_iconpath[2])">#</style>
            </tal:block>
            <div id="mediatum_clear_trash_question" i18n:translate="clear_trash_question"> </div>
            <div id="mediatum_delete_folder_question" i18n:translate="delete_folder_question"> </div>
            <div id="select_target_dir" >
               <tal:block i18n:translate="select_target_dir"/>&nbsp;&nbsp;&nbsp;
               <a href="#" tal:attributes="onclick python:'parent.cancelOperation()'">
                   <img src="/static/img/cancel.svg" i18n:attributes="title cancel"/>
               </a>&nbsp;
            </div>
        </body>
    </html>
</metal:block>

<div metal:define-macro="edit_paging" class="mediatum_edit_paging">
    <div tal:condition="python:previd" id="previd">
        <a tal:attributes="href python:u'/edit/edit_content?srcnodeid={}&id={}&tab={}'.format(srcnodeid, previd, tab)">
            <img class="mediatum-icon-small" border="0" src="/static/img/arrow-left.svg"/>
        </a>
    </div>
    <div tal:condition="python:previd or nextid" id="orid" >
        <tal:block tal:replace="raw script"/>
        <select id="goto" tal:attributes="onchange python:u'gotoContent(\'{}\', document.getElementById(\'goto\').value,\'{}\')'.format(srcnodeid, tab)">
            <option tal:repeat="item combodata" tal:attributes="value python:item[0]; selected python:[None,'selected'][item[0]==nodeid]" tal:content="python:item[1]" ></option>
        </select>
        / <tal:block tal:replace="absitems" />
    </div>
    <div tal:condition="python:nextid" id="nextid">
        <a tal:attributes="href python:u'/edit/edit_content?srcnodeid={}&id={}&tab={}'.format(srcnodeid, nextid, tab)">
            <img class="mediatum-icon-small" border="0" src="/static/img/arrow-right.svg"/>
        </a>
    </div>
</div>

<metal:block metal:define-macro="edit_paging_combo"> </metal:block>

<metal:block metal:define-macro="edit_action_error">
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <script tal:repeat="src html_head_javascript_src" tal:attributes="src src"> </script>
    </head>
    <body>
        <h1 i18n:translate="edit_error">TEXT</h1>
        <i i18n:translate="edit_nobase">TEXT<span tal:content="edit_action_error" i18n:name="msg"/></i>
    </body>
</html>
</metal:block>

<metal:block metal:define-macro="edit_action_new_error">
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <script language="text/javascript">
            opener.reloadURL('edit?id="""+node.id+"""');
        </script>
        <script tal:repeat="src html_head_javascript_src" tal:attributes="src src"> </script>
    </head>
    <body>
        <h2 i18n:translate="edit_error">TEXT</h2>
        <span i18n:translate="edit_create_new_folder">TEXT</span>
    </body>
</html>
</metal:block>

<i metal:define-macro="access_error" i18n:translate="edit_access_error">TEXT</i>

<metal:block metal:define-macro="frame_content">
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
        <head>
            <meta http-equiv="X-UA-Compatible" content="IE=9"/>
            <META http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
            <meta content="text/html;charset=UTF-8" http-equiv="content-type"/>
            <link rel="stylesheet" href="/static/jquery-ui-1.12.1/jquery-ui.css" />
            <link rel="stylesheet" href="/static/css/editor.css" />

            <tal:block metal:use-macro="include_javascript_script_tags_frame"/>
            <script type="text/javascript" tal:content="python:U'var tab=\'{}\';'.format(tab)"/>
            <script tal:content="python:u'var js_edit_layout_togglertip_open = \'{}\';'.format(translate(language, 'edit_layout_togglertip_open'))"/>
            <script tal:content="python:u'var js_edit_layout_togglertip_closed = \'{}\';'.format(translate(language, 'edit_layout_togglertip_closed'))"/>
            <script tal:content="python:u'var js_edit_layout_resizertip = \'{}\';'.format(translate(language, 'edit_layout_resizertip'))"/>
            <script src="/static/js/edit/edit_frame.js"> </script>
            <tal:block tal:replace="script"/>
            <script tal:repeat="src html_head_javascript_src" tal:attributes="src src"> </script>
        </head>

        <body id="body2">
            <div id="navigation">
                <tal:block tal:replace="raw tabs"/>
                <!-- operations-->
                <div id="mediatum_operations" tal:condition="python:len(ids)==1" tal:content="raw operations">TEXT</div>
                <!-- breadcrumbs-->
                <div class="mediatum_breadcrumbs_nav">
                    <div>
                        <div class="mediatum_breadcrumbs_link"><b i18n:translate="edit_actual_dir" class="mediatum_breadcrumbs_padding"> </b></div>
                        <div class="mediatum_nodesperpage" tal:condition="python: node.isContainer()">
                            <input id="sortfield" type="hidden" name="type" tal:attributes="value python:sortfield;"/>
                            <label for="nodesperpage" i18n:translate="edit_nodes_per_page"> </label>
                            <select
                                name="nodesperpage"
                                tal:attributes="onchange python: '''sortItemsPage_sync($('#sortfield'), this, '{}', '{}')'''.format(ids[0], tab)"
                            >
                                <option
                                    tal:repeat="npp nodesperpage_options"
                                    tal:attributes="value npp; selected python:'selected' if ustr(npp)==nodesperpage_from_req else None"
                                    tal:content="python:npp"
                                    i18n:translate=""
                                />
                            </select>
                        </div>
                    </div>
                    <div class="mediatum_breadcrumbs_content" tal:content="raw dircontent"> </div>
                    <!-- nav-->
                    <div class="mediatum_divnav"  tal:content="raw paging"> </div>
                </div>
            </div>

            <div id="sub_content" >
                <tal:block tal:replace="raw body"/>
            </div>
            <!--content end-->
            <div id="overlay">
                <div id="background"> </div>
                <div id="text"></div>
            </div>
        </body>
    </html>
</metal:block>

<metal:block metal:define-macro="error">
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
        <head>
            <META http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
            <meta content="text/html;charset=UTF-8" http-equiv="content-type"/>
            <link rel="stylesheet" href="/static/css/editor.css" />
            <link rel="stylesheet" tal:repeat="src html_head_style_src" tal:attributes="href src" />
            <script tal:repeat="src html_head_javascript_src" tal:attributes="src src"> </script>
        </head>
        <body>
            <div id="mediatum_logocontainer">
                &nbsp;
            </div>
            <div class="topmenucontainer">
                <span>&nbsp;</span>
            </div>
            <div class="mediatum_MainMenu">
                <br/>
                <br/>
                <p i18n:translate="edit_error_msg" class="error">TEXT
                    <span i18n:name="link">
                        <a i18n:translate="hier_link" href="../login" target="_parent" class="mediatum-link-internal">
                        </a>
                    </span>
                </p>
            </div>
        </body>
    </html>
</metal:block>

<tal:block metal:define-macro="itemlist">
    <div id="items" >
        <span i18n:translate="edit_meta_count_of_nodes"><span tal:content="python:node_count" i18n:name="number"/> </span>
    </div>
</tal:block>
