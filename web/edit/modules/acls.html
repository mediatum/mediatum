<!--
  Copyright (C) since 2007, Technical University of Munich (TUM) and mediaTUM authors
  SPDX-License-Identifier: AGPL-3.0-or-later
-->
<tal:block metal:define-macro="edit_acls">
    <script src="/static/js/edit/modules/acls.js"> </script>
    <script src="/static/js/mediatum.js"> </script>
    <script tal:content="runsubmit" language="javascript">
        function runsubmit(){
            document.getElementById('mediatum-edit-form-acls').submit();
        }
    </script>

    <div id="sub_content_content">


    <form class="edit" id="mediatum-edit-form-acls" method="post">
        <input tal:attributes="value csrf" type="hidden" name="csrf_token"/>
        <input tal:attributes="value srcnodeid" type="hidden" name="srcnodeid"/>
        <input type="hidden" name="save" value="save"/>
        <input type="hidden" name="nodeid" tal:attributes="value idstr"/>
        <p><input i18n:attributes="value save" type="button" name="save" onClick="runsubmit()"/></p>

        <tal:block tal:condition="adminuser">
            <span i18n:translate="edit_acls_selection">TEXT</span>
            <a
                href="#!" onclick="showACLGroup()"
                i18n:translate="edit_acls_selectacl"
                i18n:attributes="title edit_acls_selectacltitle"
                class="mediatum-link-mediatum"
            >
            </a> |
            <a
                href="#!"
                onclick="showACLUser();getSelect(document.getElementById('mediatum-edit-form-acls').nodeid.value)"
                i18n:translate="edit_acls_selectuser"
                i18n:attributes="title edit_acls_selectusertitle"
                class="mediatum-link-mediatum"
            >
            </a>
            <br/>
            <br/>
        </tal:block>

        <div id="acl_div" style="border:1px solid silver;padding:5px">
            <h5 i18n:translate="edit_acls_groupheader">TEXT</h5>
            <tal:block tal:replace="raw contentacl"/>
        </div>

        <div tal:condition="adminuser" id="user_div" style="border:1px solid silver; display:none; padding:5px">
            <h5 i18n:translate="edit_acls_userheader">TEXT</h5>
            <span id="useracl"/>
        </div><br/><br/>

        <p>
            <input type="hidden" name="type" id="type" value="acl"/>
            <input i18n:attributes="value save" type="button" name="save" onClick="runsubmit()"/>
        </p>
    </form>

    </div>

    <div id="sub_footer_module"> </div>
</tal:block>

<tal:block metal:define-macro="edit_acls_selectbox">
    <tal:block tal:condition="python:type=='read'" i18n:translate="edit_acls_righttype_read">TEXT</tal:block>
    <tal:block tal:condition="python:type=='write'" i18n:translate="edit_acls_righttype_write">TEXT</tal:block>
    <tal:block tal:condition="python:type=='data'" i18n:translate="edit_acls_righttype_data">TEXT</tal:block>

    <table>
        <tr>
            <td align="left" valign="top">
                <select
                    tal:content="raw val_left"
                    tal:attributes="
                        name python:'left{}'.format(name);
                        ondblclick python:'moveRight(document.getElementById(\'mediatum-edit-form-acls\').left{0},document.getElementById(\'mediatum-edit-form-acls\').right{0})'.format(name);
                       "
                    style="width:320px"
                    size="10"
                    multiple="multiple"
                   >
                </select>
            </td>
            <td style="padding-left:10px;padding-right:10px;" align="left" valign="center">
                <input
                    tal:attributes="
                        onclick python:'moveLeft(document.getElementById(\'mediatum-edit-form-acls\').left{0},document.getElementById(\'mediatum-edit-form-acls\').right{0})'.format(name);
                       "
                    type="button"
                    value="<<"
                   />
                <br/>
                <input
                    tal:attributes="
                        onclick python:'moveRight(document.getElementById(\'mediatum-edit-form-acls\').left{0},document.getElementById(\'mediatum-edit-form-acls\').right{0})'.format(name);
                       "
                    type="button"
                    value=">>"
                   />
            </td>
            <td align="left" valign="top">
                <select
                    tal:content="raw val_right"
                    tal:attributes="
                        id python: 'select_right_acl_{}'.format(type);
                        name python:'right{}'.format(name);
                        ondblclick python:'moveLeft(document.getElementById(\'mediatum-edit-form-acls\').left{0},document.getElementById(\'mediatum-edit-form-acls\').right{0})'.format(name);
                       "
                    style="width:320px"
                    size="10"
                    multiple="multiple"
                   >
                </select>
            </td>
        </tr>
        <tr>
            <td>
            </td>
            <td></td>
            <td><tal:block i18n:translate="edit_acls_filter_input_label">TEXT</tal:block>
                <input
                    type="text"
                    tal:attributes="id python: 'input_acl_%s' % type "
                    onChange=""
                    i18n:attributes="title edit_acls_filter_input_tooltip"
                />
            </td>
        </tr>
    </table>
    <br/>
</tal:block>


<tal:block metal:define-macro="edit_acls_userselectbox">
    <tal:block tal:condition="python:type=='read'" i18n:translate="edit_acls_userrighttype_read">TEXT</tal:block>
    <tal:block tal:condition="python:type=='write'" i18n:translate="edit_acls_userrighttype_write">TEXT</tal:block>
    <tal:block tal:condition="python:type=='data'" i18n:translate="edit_acls_userrighttype_data">TEXT</tal:block>
    <table>
        <tr>
            <td align="left" valign="top">
                <select
                    tal:content="raw val_left"
                    tal:attributes="
                        name python:'leftuser{}'.format(name);
                        ondblclick python:'moveRight(document.getElementById(\'mediatum-edit-form-acls\').leftuser{0},document.getElementById(\'mediatum-edit-form-acls\').rightuser{0})'.format(name);
                       "
                    style="width:320px"
                    size="10"
                    multiple="multiple"
                   >
                </select>
            </td>
            <td style="padding-left:10px;padding-right:10px;" align="left" valign="center">
                <input
                    tal:attributes="
                        onclick python:'moveLeft(document.getElementById(\'mediatum-edit-form-acls\').leftuser{0},document.getElementById(\'mediatum-edit-form-acls\').rightuser{0})'.format(name);
                       "
                    type="button"
                    value="<<"
                   />
                <br/>
                <input
                    tal:attributes="
                        onclick python:'moveRight(document.getElementById(\'mediatum-edit-form-acls\').leftuser{0},document.getElementById(\'mediatum-edit-form-acls\').rightuser{0})'.format(name);
                       "
                    type="button"
                    value=">>"
                   />
            </td>
            <td align="left" valign="top">
                <select
                    tal:content="raw val_right"
                    tal:attributes="
                        id python: 'select_right_user_{}'.format(type);
                        name python:'rightuser{}'.format(name);
                        ondblclick python:'moveLeft(document.getElementById(\'mediatum-edit-form-acls\').leftuser{0},document.getElementById(\'mediatum-edit-form-acls\').rightuser{0})'.format(name);
                       "
                    style="width:320px"
                    size="10"
                    multiple="multiple"
                   >
                </select>
            </td>
        </tr>
        <tr>
            <td>
            </td>
            <td></td>
            <td><tal:block i18n:translate="edit_acls_filter_input_label">TEXT</tal:block>
                <input
                    type="text"
                    tal:attributes="id python: 'input_user_%s' % type "
                    onChange=""
                    i18n:attributes="title edit_acls_filter_input_tooltip"
                />
            </td>
        </tr>
    </table>
    <br/>
</tal:block>

<i metal:define-macro="acl_editor_error" i18n:translate="edit_acls_id_count_error">TEXT</i>
