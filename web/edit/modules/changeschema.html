<!--
  Copyright (C) since 2007, Technical University of Munich (TUM) and mediaTUM authors
  SPDX-License-Identifier: AGPL-3.0-or-later
-->
<tal:block metal:define-macro="changeschema_popup">
    <link rel="stylesheet" href="/css/edit/modules/changeschema.css" type="text/css" />
    <script tal:content="python:u'var is_container = {};'.format(is_container)"> </script>
    <script tal:content="python:u'var nid = {};'.format(node.id)"/>
    <script src="/static/js/edit/modules/changeschema.js"> </script>

    <div id="navigation_content">
      <tal:block metal:use-macro="web/edit/edit.html/itemlist"/>
    </div>

    <div id="sub_content_content">

      <div id="scrollcontainer">
          <p tal:condition="error" tal:content="error" i18n:translate="" class="error" style="text-align:center"/>

          <form
              id="selection_objtypes"
              tal:attributes="action python:u'/edit/edit_content?srcnodeid={}&id={}'.format(srcnodeid, id)"
              method="post"
              style="margin:5px"
          >
              <input tal:attributes="value csrf" type="hidden" name="csrf_token">
              <h3 i18n:translate="edit_changeschema_obj_selection">TEXT</h3>

              <input type="hidden" name="nodeid" tal:attributes="value python:id"/>
              <input type="hidden" name="currentContentType" tal:attributes="value python:current_type"/>
              <input type="hidden" name="currentSchema" tal:attributes="value python:current_schema"/>
              <input type="hidden" name="tab" value="changeschema"/>

              <table id="datatable" cellpadding="0px" cellspacing="0px">
                  <tr>
                      <th i18n:translate="edit_changeschema_nodeid"/>
                      <th i18n:translate="edit_changeschema_objtype"/>
                      <th tal:condition="python:not is_container" i18n:translate="edit_changeschema_schemename"/>
                      <th tal:condition="python:not is_container" i18n:translate="edit_changeschema_schemeid"/>
                  </tr>
                  <tr>
                      <td tal:content="python:id"/>
                      <td tal:content="python:current_type" i18n:translate=""/>
                      <td tal:condition="python:not is_container" tal:content="python:long_current_schema"/>
                      <td tal:condition="python:not is_container" tal:content="python:current_schema"/>
                  </tr>
              </table>

              <p i18n:translate="edit_changeschema_msg2"/>
              <p>
                  <label i18n:translate="edit_changeschema_obj_sel">TEXT</label>
                  <select name="objtype" onchange="showWait();getSelect(this.form.nodeid.value,this.form.objtype.options[this.form.objtype.selectedIndex].value);">
                       <option tal:repeat="datatype datatypes" tal:attributes="value python:datatype; selected python:'1' if datatype==current_type else nothing" tal:content="python:datatype" i18n:translate=""/>
                  </select>

                  <tal:block metal:use-macro="changeschema_selectscheme"/>
              </p>

              <p><input i18n:attributes="value edit_changeschema_selection_value" type="submit" name="submit"/></p>

          </form>
      </div>
    </div>

    <div id="sub_footer_module"> </div>
</tal:block>

<tal:block metal:define-macro="changeschema_selectscheme">
    <span tal:condition="schemes" id="schema" name="schema">
        <select name="schema">
             <option tal:repeat="schema schemes" tal:attributes="value python:schema.name;selected python:{True:'1', False:nothing}[schema.name==current_schema]" tal:content="python:schema.getLongName()" i18n:translate=""/>
        </select>
    </span>

    <span tal:condition="python:not schemes" id="schema" name="schema">
        <label>&nbsp;&nbsp;&nbsp;</label><span style="font-weight:bold" i18n:translate="edit_changeschema_noscheme">TEXT</span>
    </span>
</tal:block>
