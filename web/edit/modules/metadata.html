<!--
  Copyright (C) since 2007, Technical University of Munich (TUM) and mediaTUM authors
  SPDX-License-Identifier: AGPL-3.0-or-later
-->
<tal:block metal:define-macro="no_mask">
    <div style="clear:left"> </div>
    <div id="operation">
        <div><a href="#" onclick="showhide()"><img src="/static/img/uparrowdisabled.png"/></a></div>
    </div>
    <div id="scrollcontainer">
        <div id="scrollcontent">
            <p>&nbsp;</p>
            <p align="center" i18n:translate="edit_meta_info1">TEXT</p>
        </div>
    </div>
</tal:block>

<tal:block metal:define-macro="multiple_documents_not_supported">
    <div style="clear:left"> </div>
    <div id="operation">
        <div><a href="#" onclick="showhide()"><img src="/static/img/uparrowdisabled.png"/></a></div>
    </div>
    <div id="scrollcontainer">
        <div id="scrollcontent">
            <p>&nbsp;</p>
            <p align="center" i18n:translate="edit_meta_info3">TEXT</p>
        </div>
    </div>
</tal:block>

<tal:block metal:define-macro="edit_metadata">
    <link rel="stylesheet" href="/static/css/edit/modules/metadata.css" type="text/css" />

    <script tal:content="python:u'var new_nodename = \'{}\';'.format(node.getLabel())">TEXT</script>

    <div id="navigation_content">

        <tal:block metal:use-macro="web/edit/edit.html/itemlist"/>

        <div id="operation">
            <form class="edit" action="edit_content" method="post" id="changeform">
                <input tal:attributes="value csrf" type="hidden" name="csrf_token"/>
                <input type="hidden" name="tab" value="metadata"/>
                <input tal:attributes="value idstr" type="hidden" name="id"/>
                <input tal:attributes="value srcnodeid" type="hidden" name="srcnodeid"/>
                <tal:block tal:condition="python:len(masklist)>1">
                    <span i18n:translate="edit_meta_mask_selection">TEXT</span>:
                    <select name="mask" onChange="this.form.submit()">
                        <tal:block tal:repeat="mask masklist">
                            <option tal:attributes="value python:mask.getName();selected python:'selected' if mask.getName()==maskname else None" tal:content="python:mask.getDescription() if mask.getDescription()!='' else mask.getName()"/>
                        </tal:block>
                    </select>
                </tal:block>
                <tal:block tal:condition="python:len(masklist)==1 and masklist[0].getDescription()!=''">
                    <span i18n:translate="edit_mask">TEXT</span>: <span tal:content="python:masklist[0].getDescription()">TEXT</span>
                </tal:block>
            </form>
        </div>
    </div>

    <div id="sub_content_content">

        <tal:block tal:condition="python:err">
            <p class="error">
                <b i18n:translate="fieldsmissing"> </b>
                <b i18n:translate="saved_in_inconsistent_data"> </b>
            </p>
        </tal:block>

            <form class="edit" action="edit_content" method="post" id="mediatum-edit-form-metadata">
                <!-- Prevent implicit submission of the form -->
                <button type="submit" disabled="disabled" style="display: none;" aria-hidden="true"> </button>
                <input tal:attributes="value csrf" type="hidden" name="csrf_token"/>
                <input tal:attributes="value srcnodeid" type="hidden" name="srcnodeid"/>
                <input i18n:attributes="value save" type="submit" name="save"/>
                <input
                    type="button"
                    i18n:attributes="value cancel"
                    tal:attributes="onclick python:'window.location.href=\'/edit/edit_content?srcnodeid={}&id={}\''.format(srcnodeid, idstr)"
                   />
                <tal:block tal:replace="structure python:maskform"/>
                <small class="mediatum-form-required-info">(<span class="required">*</span> <span i18n:translate="admin_mandatory_info"> </span>)</small>
                <input i18n:attributes="value save" type="submit" name="save"/>
                <input
                    type="button"
                    i18n:attributes="value cancel"
                    tal:attributes="onclick python:'window.location.href=\'/edit/edit_content?srcnodeid={}&id={}\''.format(srcnodeid, idstr)"
                   />
                <input tal:attributes="value maskname" type="hidden" name="mask"/>
                <input type="hidden" name="tab" value="metadata"/>
                <input tal:attributes="value idstr" type="hidden" name="id"/>
                <input type="hidden" name="edit_metadata" value="edit_metadata"/>
            </form>
    </div>
    <div id="sub_footer_module">
        <div style="text-align:right;margin-right:5px;overflow:hidden;">
            <small>
                <tal:block tal:condition="python:creation_date is not None">
                    <span><span i18n:translate="edit_meta_created"> </span>: </span>
                     <tal:block tal:content="python:u'{} ({})'.format(creation_date[0], creation_date[1]) "/>
                </tal:block>
                <tal:block tal:condition="python:update_date is not None">
                    <span><span i18n:translate="edit_meta_changed"> </span>: </span>
                     <tal:block tal:content="python:u'{} ({})'.format(update_date[0], update_date[1]) "/>
                </tal:block>
            </small>
        </div>
    </div>

    <script tal:content="python:u'var js_edit_layout_togglertip_open = \'{}\';'.format(translate(language, 'edit_layout_togglertip_open'))">;</script>
    <script tal:content="python:u'var js_edit_layout_togglertip_closed = \'{}\';'.format(translate(language, 'edit_layout_togglertip_closed'))">;</script>
    <script src="/static/js/jquery.layout.min.js"> </script>
    <script src="/static/js/jquery.layout.resizePaneAccordions-latest.min.js"> </script>
    <script src="/static/js/mediatum.js"> </script>
    <script src="/static/js/edit/modules/metadata.js"> </script>
</tal:block>

<metal:block metal:define-macro="redirect">
    <tal:block tal:replace="raw python:'<script type=&quot;text/javascript&quot;>'"/>
        <tal:block tal:condition="pid" tal:replace="raw python:u'updateNodeLabels({});'.format(pid)"/>
        <tal:block tal:replace="raw python:u'window.location.href=\'{}\';'.format(url)"/>
    <tal:block tal:replace="raw python:'</script>'"/>
</metal:block>
