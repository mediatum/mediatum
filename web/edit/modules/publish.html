<!--
  Copyright (C) since 2007, Technical University of Munich (TUM) and mediaTUM authors
  SPDX-License-Identifier: AGPL-3.0-or-later
-->
<form
    metal:define-macro="publish_form"
    tal:attributes="action python:u'/edit/edit_content?srcnodeid={}&id={}&tab=publish'.format(srcnodeid, id)"
    method="post"
    id="mediatum_publish_form"
    name="publishform"
>
    <input tal:attributes="value csrf" type="hidden" name="csrf_token">
    <link rel="stylesheet" href="/css/ftree.css" type="text/css" />
    <script type="text/javascript" src="/js/ftree.js"> </script>
    <script type="text/javascript" tal:content="script"> </script>
    <script src="/js/edit/modules/publish.js"> </script>

    <div id="sub_content_content">
        <div id="mediatum_treeform">
            <div id="mediatum_treeform-background">&nbsp;</div>
            <div id="mediatum_treeform-form">
                <div class="mediatum_treeform_close"><a href="#" onclick="closeForm()" i18n:attributes="title mask_editor_cancel"><img src="/img/cancel.png"/></a></div>
                <div class="mediatum_treeform_div">
                <h3 i18n:translate="edit_publish_info">TEXT</h3>
                <div class="mediatum_treeform_dir">
                    <ul id="classtree" class="tree">
                        <li tal:attributes="id python:u'Node{}'.format(basedir.id)"><a tal:attributes="id python:unicode(basedir.id); title python:u'{} ({})'.format(basedir.getLabel(), basedir.id)" tal:content="python:basedir.getLabel()" href="#">TEXT</a>
                            <ul>
                                <li tal:attributes="parentId python:basedir.id" class="spinner.gif"><a href="#" id="node_0"> </a></li>
                            </ul>
                        </li>
                    </ul>
                </div>
                    <p class="mediatum_treeform_btn_p">
                        <button class="mediatum_treeform_btn_ok" type="button" onclick="closeForm()">OK</button>
                    </p>
                </div>
            </div>
        </div>

        <div class="mediatum_clear_left"> </div>
        <div>
            <p tal:condition="python:len(faultyerrlist)>0" id="mediatum_publish_error" class="error">
                <tal:block tal:repeat="item faultyerrlist" tal:replace="raw python:u'{}<br/>'.format(item)"/>
            </p>
        </div>
    
        <div id="mediatum_publish_operation">
            <div class="mediatum_publish_op_div">
                <br/>
                <button type="button" onclick="showForm();event.preventDefault();" i18n:translate="edit_publish_button_select">Verzeichnisse auswählen</button>
                <p>
                    <input type="hidden" name="destination" id="destination" tal:attributes="value stddir" />
                    <br/>
                    <button id="btn_publish" type="submit" name="dopublish" i18n:attributes="title edit_publish_button_deactivated_tooltip" i18n:translate="edit_publish_button">TEXT</button>
                </p>

        </div>
        <div>
            <div><label for="mediatum_dest_names" i18n:translate="edit_publish_selected_dirs">Ausgewählte Verzeichnisse:</label></div>
            <div id="mediatum_dest_names" name="dest_names" tal:content="stdname"/>
        </div>
    </div>
    <tal:block tal:replace="raw showdir">TEXT</tal:block>
  </div>
    <div id="sub_footer_module"> </div>
</form>

<metal:block metal:define-macro="reload">
    <tal:block tal:replace="raw python:'<script type=&quot;text/javascript&quot;>'"/>
        <tal:block tal:repeat="item change" tal:replace="raw python:u'parent.updateNodeLabels({});'.format(item)"/>
    <tal:block tal:replace="raw python:'</script>'"/>  
</metal:block>
