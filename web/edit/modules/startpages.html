<!--
  Copyright (C) since 2007, Technical University of Munich (TUM) and mediaTUM authors
  SPDX-License-Identifier: AGPL-3.0-or-later
-->
<tal:block metal:define-macro="named_filelist" tal:repeat="item named_filelist">
    <tr tal:define="cssclass python:named_filelist.index(item)%2 and 'silver' or 'norm'" tal:attributes="class cssclass; id python:item.short_path;">
        <td tal:repeat="lang languages">
            <input type="radio" i18n:attributes="title edit_startpages_selectlanguage" tal:attributes="name python:u'radio_{}'.format(lang); value python:item.short_path; checked python:'checked' if lang in item.language_list else None"/>
        </td>
        <td style="border-left:1px solid silver">
            <input type="text" tal:attributes="name python:u'descr.{}'.format(item.short_path); value python:item.description" style="width:300px"/>
        </td>
        <td tal:content="python:unicode(item.technical_name)"/>
        <td style="width:20px;text-align:right">
            <a target="_blank" tal:attributes="href python:item.technical_name"  i18n:attributes="title edit_startpages_link">
                <img src="/img/rightarrow.png"/>
            </a>
        </td>
        <td style="text-align:right; font-size:9px" tal:content="python:unicode(item.file_size)"/>
        <td style="text-align:right">
            <a href="#" tal:attributes="onclick python:u'editFile(\'{}\')'.format(item.short_path)" i18n:attributes="title edit_startpages_edit"><img src="/img/edit_opt.png"/></a>
            <input tal:attributes="onclick python:u'questionDel(\'{}\')'.format(item.short_path);" i18n:attributes="title edit_startpages_delete" type="image" src="/img/delete.png"/>
        </td>
    </tr>
</tal:block>

<metal:block metal:define-macro="edit_startpages">
    <link rel="stylesheet" href="/css/edit/modules/startpages1.css" type="text/css" />

    <script type="text/javascript" src="/ckeditor/ckeditor.js"> </script>
    <script type="text/javascript" src="/js/jquery.layout.resizePaneAccordions-latest.min.js"> </script>
    <script tal:content="python:u'var id = {};'.format(id)"> </script>
    <script tal:content="python:u'var csrf = \'{}\';'.format(csrf)"> </script>
    <script src="/js/edit/modules/startpages.js"> </script>

    <div id="deleteconfirm" i18n:translate="edit_startpages_deleteconfirm" style="display:none">TEXT</div>
     <div id="editform">
        <div id="editform-background">&nbsp;</div>
        <div id="editform-form">
            <div style="position:absolute;top:-7px;right:-7px;z-index:10002"><a href="#" onclick="closeForm()" i18n:attributes="title mask_editor_cancel"><img src="/img/cancel.png"/></a></div>
            <form action="javascript:handleCKEditorPost();void(0);">
                <input type="hidden" id="filename" name="filename"/>
                <textarea id="page_content" name="page_content"> </textarea>
                <script>ckeditor_config();</script>
            </form>
        </div>
    </div>

    <form id="01" method="post" name="startpages" action="/edit/edit_content" style="padding:0;margin:0">
        <input tal:attributes="value csrf" type="hidden" name="csrf_token">
        <div id="navigation_content" style="text-align:center">
            <input tal:attributes="value id" type="hidden" name="id"/>
            <input tal:attributes="value tab" type="hidden" name="tab"/>
            <button type="submit" i18n:attributes="value edit_startpages_savechanges" name="startpages_save" i18n:translate="edit_startpages_savechanges">TEXT</button>
        </div>
        <div id="sub_content_content" style="border-width:0 0 0 1px!important">
            <div id="accordion">
                <h3><a href="#" i18n:translate="edit_startpages_header">TEXT</a> <small i18n:translate="edit_startpages_explain_table">TEXT</small></h3>
                <div id="sectionstart">
                    <table id="filetable" cellpadding="0px" cellspacing="0px">
                        <thead>
                            <tr>
                                <th tal:repeat="lang languages" tal:content="lang" style="width:20px">TEXT</th>
                                <th i18n:translate="edit_startpages_descriptive_name" style="border-left:1px solid silver">TEXT</th>
                                <th i18n:translate="edit_startpages_technical_name" colspan="2">TEXT</th>
                                <th i18n:translate="edit_startpages_file_size">TEXT</th>
                                <th style="text-align:right">
                                    <a href="#" i18n:attributes="value edit_startpages_addnew"  onclick="addFile()"><img src="/img/install.png"/></a>
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tal:block metal:use-macro="named_filelist"/>
                        </tbody>
                        <tfoot>
                            <tr style="background-color:#d8d8d8">
                                <td tal:repeat="lang languages">
                                    <input type="radio" i18n:attributes="title edit_startpages_selectlanguage" tal:attributes="name python:u'radio_{}'.format(lang); value python:''; checked python:'checked' if node.getStartpageFileNode(lang)==None else None"/>
                                </td>
                                <td colspan="5" style="border-left:1px solid silver" i18n:translate="edit_startpages_do_not_use_a_startpage">TEXT</td>
                            </tr>
                        </tfoot>
                    </table>
                </div>
            </div>
        </div>
        <div id="sub_footer_module"> </div>
    </form>
</metal:block>

<p metal:define-macro="header">
    <span i18n:translate="edit_editor_header">TEXT</span>
    <strong>
        <span tal:content="python: descriptiveLabel">TEXT</span>
    </strong>
</p>

<tal:block metal:define-macro="fckeditor_customs_filemanager"><!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
    <head>
        <title i18n:translate="edit_startpages_filebrowser_title">TEXT</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <meta name="robots" content="noindex, nofollow">
        <link href="/module/editor/filemanager/browser/default/browser.css" type="text/css" rel="stylesheet">
        <link rel="stylesheet" href="/css/edit/modules/startpages2.css" type="text/css" />
        <script type="text/javascript" language="javascript" src="/js/jquery-1.12.4.js"> </script>
        <script type="text/javascript" language="javascript" src="/js/jquery-migrate-1.4.1.js"> </script>
        <script tal:content="python:u'var id = {};'.format(id)"> </script>
        <script src="/js/edit/modules/startpages.js"> </script>
    </head>
    <body>
        <div id="deleteconfirm" i18n:translate="edit_fckeditor_cfm_deleteconfirm" style="display:none">TEXT</div>
        <div style="background-color:silver;padding:5px;margin-0px;overflow:hidden" i18n:translate="edit_fckeditor_cfm_clicktochoose">TEXT</div>
        <div id="nofiles" style="display:none;position:absolute:top:400px">
            <p i18n:translate="edit_fckeditor_cfm_hasnoimages" style="text-align:center;padding-top:30px">TEXT</p>
        </div>
        <div id="nofiles" style="position:absolute:top:400px" tal:condition="python:len(files)==0">
            <p i18n:translate="edit_fckeditor_cfm_hasnoimages" style="text-align:center;padding-top:30px">TEXT</p>
        </div>
        <div style="position:absolute;top:40px;left:0px;right:0px;bottom:20px;overflow:auto" id="files">
            <div class="imagecontainer" tal:repeat="file files" tal:attributes="id python:file.getName()">
                <div class="innerimagecontainer"  tal:attributes="onclick python:u'return SelectFile(\'/file/{}/{}\', {})'.format(node.id, file.getName(), node.id)">
                    <img class="image" i18n:attributes="title edit_fckeditor_cfm_clicktochoose" tal:attributes="width python:fit(file.retrieveFile(), (140,100))[0]; height python:fit(file.retrieveFile(), (140,100))[1]; src python:u'/file/{}/{}'.format(node.id, file.getName());"/>
                </div>
                <div i18n:attributes="title edit_fckeditor_cfm_nameonserver;" tal:attributes="onclick python:u'return SelectFile(\'/file/{}/{}\', {})'.format(node.id, file.getName(), node.id)" tal:content="python:u'/file/{}/{}'.format(node.id, file.getName())" style="font-size:10px">TEXT</div>
                <span style="color:#dd0000;width:50px;font-size:10px" tal:condition="python:(file.getName())==(logoname)" i18n:translate="edit_fckeditor_cfm_imageislogo">TEXT</span>
                <span width="50px" tal:condition="python:(file.getName())!=(logoname)">&nbsp;</span>
                <div width="75px" style="text-align:center;cursor:pointer" tal:condition="python:delbutton">
                    <img i18n:attributes="title edit_fckeditor_cfm_delete" tal:attributes="name python:file.getName(); onclick python:'return delete_nodefile(this)'; " type="image" src="/img/delete.png"/>
                </div>
            </div>
        </div>
    </body>
</html>
</tal:block>
